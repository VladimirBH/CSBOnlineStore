flowchart TD
    U1[UOB1: Авторизация пользователя<br/><i>[Пользователь, Система]</i>]
    U2[UOB2: Открытие корзины<br/><i>[Пользователь]</i>]
    U3[UOB3: Проверка содержимого корзины<br/><i>[Система]</i>]
    U4[UOB4: Оформление заказа<br/>(ввод адреса, оплата, подтверждение)<br/><i>[Пользователь]</i>]
    U5[UOB5: Контроль наличия товаров<br/><i>[Система, БД]</i>]

    X1((X)):::junction

    U5a[UOB5a: Уведомление о недоступности<br/><i>[Система]</i>]
    End1[UOB9a: Завершение без оформления<br/><i>[—]</i>]

    U6[UOB6: Сохранение заказа в БД<br/><i>[Система]</i>]
    U7[UOB7: Очистка корзины<br/><i>[Система]</i>]
    U8[UOB8: Уведомление пользователя<br/><i>[Система]</i>]
    U9[UOB9b: Завершение процесса<br/><i>[—]</i>]

    U1 --> U2 --> U3 --> U4 --> U5 --> X1
    X1 --> U6 --> U7 --> U8 --> U9
    X1 --> U5a --> End1

    classDef junction fill=#fff,stroke=#000,stroke-width=2,shape=circle;
